{% load static %}

<!DOCTYPE html>
<html>
<head>
  <title>Home | Mantis Bootstrap 5 Admin Template</title>
  <!-- [Meta] -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Mantis is made using Bootstrap 5 design framework.">
  <meta name="keywords" content="Mantis, Dashboard UI Kit, Bootstrap 5, Admin Template">
  <meta name="author" content="CodedThemes">

  <!-- [Favicon] icon -->
  <link rel="icon" href="{% static 'images/favicon.svg' %}" type="image/x-icon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <!-- [Google Font] Family -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;500;600;700&display=swap" id="main-font-link">
  
  <!-- [Tabler Icons] -->

  <link rel="stylesheet" href="{% static 'fonts/tabler-icons.min.css' %}">
  
  <!-- [Feather Icons] -->
  <link rel="stylesheet" href="{% static 'fonts/feather.css' %}">
  
  <!-- [Font Awesome Icons] -->
  <link rel="stylesheet" href="{% static 'fonts/fontawesome.css' %}">
  
  <!-- [Material Icons] -->
  <link rel="stylesheet" href="{% static 'fonts/material.css' %}">
  
  <!-- [Template css Files] -->
  <link rel="stylesheet" href="{% static 'css/style.css' %}" id="main-style-link">
  <link rel="stylesheet" href="{% static 'css/style-preset.css' %}">

  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" id="main-style-link">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="{% static 'css/sty.css' %}">
  <link rel="stylesheet" href="{% static 'css/style-preset.css' %}">
</head>
<!-- [Head] end -->
<!-- [Body] Start -->

<body data-pc-preset="preset-1" data-pc-direction="ltr" data-pc-theme="light">
<!-- base.html -->
{% comment %} {% if messages %}
  {% for message in messages %}
    <div class="alert alert-danger">{{ message }}</div>
  {% endfor %}
{% endif %} {% endcomment %}
  <!-- [ Pre-loader ] start -->
<div class="loader-bg">
  <div class="loader-track">
    <div class="loader-fill"></div>
  </div>
</div>
<!-- [ Pre-loader ] End -->
 <!-- [ Sidebar Menu ] start -->
<nav class="pc-sidebar">
  <div class="navbar-wrapper">
    <div class="m-header">
      <a href="../dashboard/index.html" class="b-brand text-primary">
        <!-- ========   Change your logo from here   ============ -->
{% if request.user.is_authenticated %}
    <span style="font-family: Arial, sans-serif; font-size: 16px; color: #333; margin-right: 10px;">
        Xin chào, <strong>{{ request.user.username }}</strong>
    </span>
    <br>
    <a href="{% url 'logout' %}" style="color: #dc3545; text-decoration: none; font-weight: bold;">
        Đăng xuất
    </a>
{% endif %}
      </a>
    </div>
    <div class="navbar-content">
      <ul class="pc-navbar">
        {% comment %} <li class="pc-item">
          <a href="" class="pc-link">
            <span class="pc-micon"><i class="ti ti-dashboard"></i></span>
            <span class="pc-mtext">Dashboard</span>
          </a>
        </li> {% endcomment %}

        <li class="pc-item pc-caption">
          <label>Hệ thống</label>
          <i class="ti ti-dashboard"></i>
        </li>
        <li class="pc-item">
          <a href="{% url 'baucu_u' %}" class="pc-link">
            <span class="pc-micon"><i class="ti ti-typography"></i></span>
            <span class="pc-mtext">Bầu Cử </span>
          </a>
        </li>
        
    
          </ul>
        </li>
       
</nav>



</header>
<!-- [ Header ] end -->
<main>
{% block content %}
        <!-- Nội dung mặc định -->
        <p>Chào mừng đến với TravelGo!</p>
{% endblock %}
</main>


  <footer class="pc-footer">
    <div class="footer-wrapper container-fluid">
      <div class="row">
        <div class="col-sm my-1">
          <p class="m-0"
            >Mantis &#9829; crafted by Team <a href="https://themeforest.net/user/codedthemes" target="_blank">Codedthemes</a> Distributed by <a href="https://themewagon.com/">ThemeWagon</a>.</p
          >
        </div>
        <div class="col-auto my-1">
          <ul class="list-inline footer-link mb-0">
            <li class="list-inline-item"><a href="../index.html">Home</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>
  <script src="../assets/js/script.js"></script>
  <!-- [Page Specific JS] start -->
  <script src="../assets/js/plugins/apexcharts.min.js"></script>
  <script src="../assets/js/pages/dashboard-default.js"></script>
  <!-- [Page Specific JS] end -->
  <!-- Required Js -->
  <script src="../assets/js/plugins/popper.min.js"></script>
  <script src="../assets/js/plugins/simplebar.min.js"></script>
  <script src="../assets/js/plugins/bootstrap.min.js"></script>
  <script src="../assets/js/fonts/custom-font.js"></script>
  <script src="../assets/js/pcoded.js"></script>
  <script src="../assets/js/plugins/feather.min.js"></script>
  
  <script>layout_change('light');</script>
  <script>change_box_container('false');</script>
  
  <script>layout_rtl_change('false');</script>
  <script>preset_change("preset-1");</script>
  
  <script>font_change("Public-Sans");</script>
  <script src="{% static 'js/plugins/popper.min.js' %}"></script>
  <script src="{% static 'js/plugins/bootstrap.min.js' %}"></script>
  <script src="{% static 'js/plugins/simplebar.min.js' %}"></script>
  <script src="{% static 'js/fonts/custom-font.js' %}"></script>
  <script src="{% static 'js/pcoded.js' %}"></script>
  <script src="{% static 'js/plugins/feather.min.js' %}"></script>

<script>
    document.querySelectorAll('.delete').forEach(function(element) {
      element.addEventListener('click', function(event) {
        if (!confirm('Bạn có chắc chắn muốn xóa  "' + this.closest('tr').querySelector('h6').textContent + '" không?')) {
          event.preventDefault();
        }
      });
    });
</script> 
<script>
function formatVND(amount) {
  try {
    amount = parseFloat(amount);
    if (isNaN(amount)) return '0 ₫';
    return amount.toLocaleString('vi-VN') + ' ₫';
  } catch (e) {
    return '0 ₫';
  }
}


function formatDate(dateString) {
    // Bỏ dấu chấm trong tháng (nếu có)
    dateString = dateString.replace('.', '');

    let date = new Date(dateString);

    let year = date.getFullYear();
    let month = String(date.getMonth() + 1).padStart(2, '0'); // tháng từ 0-11
    let day = String(date.getDate()).padStart(2, '0');

    return `${year}-${month}-${day}`;
}

function convertToDatetimeLocal(str) {
  // Tạo đối tượng ngày từ chuỗi
  const date = new Date(str);

  // Nếu sai định dạng hoặc không parse được
  if (isNaN(date)) return null;

  // Lấy từng phần và chuẩn hóa
  const yyyy = date.getFullYear();
  const mm = String(date.getMonth() + 1).padStart(2, '0');
  const dd = String(date.getDate()).padStart(2, '0');
  const hh = String(date.getHours()).padStart(2, '0');
  const min = String(date.getMinutes()).padStart(2, '0');

  return `${yyyy}-${mm}-${dd}T${hh}:${min}`;
}
;
 // Xác nhận xóa
document.addEventListener('DOMContentLoaded', function () {
    const deleteButtons = document.querySelectorAll('.delete-btn');

    deleteButtons.forEach(button => {

        button.addEventListener('click', function (event) {
            event.preventDefault();

            const userConfirmed = confirm("Bạn có chắc chắn muốn xóa mục này không?");

            if (userConfirmed) {
                window.location.href = this.href;
            }
        });
    });
});
</script>

<script>
//Cảnh báo 
document.addEventListener('DOMContentLoaded', function() {
  const modalTriggerElement = document.querySelector('.modal-trigger-alert');
  
  if (modalTriggerElement) {
    const message = modalTriggerElement.dataset.message;
    document.getElementById('modalBodyMessage').innerText = message;
    
    const dangerModal = new bootstrap.Modal(document.getElementById('dangerModal'));
    dangerModal.show();
  }
});
</script>

<script>
// Lấy vị trí
document.addEventListener('DOMContentLoaded', function() {
    const submitBtn = document.getElementById('submitChangeBtn');
    const form = document.getElementById('changeVoteForm');

    submitBtn.addEventListener('click', function(event) {

        submitBtn.disabled = true;
        submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Đang xử lý...';

        // Kiểm tra xem trình duyệt có hỗ trợ Geolocation không
        if ("geolocation" in navigator) {
            // Yêu cầu vị trí của người dùng
            navigator.geolocation.getCurrentPosition(
                
                //  ĐỒNG Ý
                function(position) {
                    // Lấy kinh độ và vĩ độ
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;

                    // Gán giá trị vào các trường ẩn trong form
                    document.getElementById('id_latitude').value = lat;
                    document.getElementById('id_longitude').value = lon;

                    // Gửi form đi
                    form.submit();
                }, 
                
                //  TỪ CHỐI / CÓ LỖI
                function(error) {
                    console.warn(`Lỗi lấy vị trí: ${error.message}`);
                    // Dù có lỗi, vẫn gửi form đi mà không có thông tin vị trí
                    form.submit();
                }
            );
        } else {
            // Nếu trình duyệt không hỗ trợ, gửi form đi luôn
            console.log("Trình duyệt không hỗ trợ Geolocation.");
            form.submit();
        }
    });
});
</script>
</body>
<!-- [Body] end -->

</html>